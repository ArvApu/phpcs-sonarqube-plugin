# Sonar PHPCS (PHP Codesniffer) plugin

This plugin can be used to import [PHPCS](https://github.com/squizlabs/PHP_CodeSniffer) reports into [SonarQube](http://sonarqube.org/).

The plugin will not run PHPCS but instead re-use the report generated by it.
Here are the steps:

1. Download and install PHPCS on the machine or project running the SonarQube analysis
2. Get sonar-phpcs-plugin _jar_ file: 
   * Download from [release](https://github.com/ArvApu/phpcs-sonarqube-plugin/releases/new)
   * Or compile manually ([Maven](https://maven.apache.org/) and at least [JDK 17](https://www.oracle.com/java/technologies/javase/jdk17-archive-downloads.html) is required):
     1. Clone project
     2. Run `mvn verify`
     3. Compiled _jar_ file should be in __target__ directory
3. Install this SonarQube PHPCS plugin (see [instructions](https://docs.sonarqube.org/latest/setup/install-plugin/) to manually install a SonarQube plugin)
3. Run PHPCS to create a json report e.g.:

  ```bash
  phpcs --standard=PSR12 --report-json=output/phpcs.json src
  ```

3. Set the `sonar.php.phpcs.reportPaths` analysis property to the path of the PHPCS json report, e.g.:

  ```
  sonar.php.phpcs.reportPaths=output/analysis/phpcs.json
  ```

4. Run the SonarQube analysis on your project
